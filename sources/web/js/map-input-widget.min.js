function MapInputWidgetManager(){var t=[],n=function(t){if(!$(t).data("initialized")){var n=new MapInputWidget(t);return n.initialize(),n}return null},i=function(n){t[n.getId()]=n};this.initializeWidgets=function(){$(".lucianolima00-map-input-widget").each(function(t,a){var e=n(a);e&&i(e)})},this.getWidget=function(n){return t[n]}}function MapInputWidget(t){var n,i,a,e,r=this,o=function(){n=$(t).find("input.lucianolima00-map-input-widget-input").get(0),$(n).change(function(){let t=$(this).val().replace(/[()]/g,"").split(",");r.setPosition({latitude:t[0],longitude:t[1]})}),i=$(t).find("input.lucianolima00-map-input-widget-search-bar").get(0),a=$(t).find("div.lucianolima00-map-input-widget-canvas").get(0)},u=function(){e=new google.maps.Map(a,{mapTypeId:$(t).data("map-type"),center:c(),zoom:$(t).data("zoom"),styles:[{featureType:"poi",stylers:[{visibility:"off"},]},],mapTypeControlOptions:{mapTypeIds:[]}}),1!==$(t).data("readonly")&&google.maps.event.addListener(e,"click",function(t){r.setPosition({latitude:t.latLng.lat(),longitude:t.latLng.lng()})})},p=function(){var n=s();r.setPosition(n),$(t).data("initialized",!0)},d=function(){$(i).prop("hidden",void 0===$(t).data("enable-search-bar")),searchBarAutocomplete=new google.maps.places.Autocomplete(i),e.controls[google.maps.ControlPosition.TOP_LEFT].push(i),google.maps.event.addListener(searchBarAutocomplete,"place_changed",function(){var t=this.getPlace().geometry;if(t){var n=t.location;r.setPosition(n),e.setCenter(n)}})},l=function(t){var n=f(),i=m(t);return(n=n.replace(/%latitude%/g,i.lat())).replace(/%longitude%/g,i.lng())},s=function(){var t,i=f(),a=$(n).prop("value");if(""!==a){var e,r=i.indexOf("%latitude%")<i.indexOf("%longitude%"),o=a.match(/-?\d+(\.\d+)?/g)[r?0:1],u=a.match(/-?\d+(\.\d+)?/g)[r?1:0];t=new google.maps.LatLng(o,u)}else t=null;return t},g=function(){var n=$(t).data("latitude"),i=$(t).data("longitude");return new google.maps.LatLng(n,i)},c=function(){var t;return""!=$(n).prop("value")?s():g()},f=function(){return $(t).attr("data-pattern").toString()},m=function(t){var n;if(void 0!==t.latitude&&void 0!==t.longitude){var i=t.latitude,a=t.longitude;n=new google.maps.LatLng(i,a)}else n=t;return n};this.initialize=function(){var n=jQuery.Event("initializeBefore");n.MapInputWidget=this,$(t).trigger(n),o(),u(),p(),d();var i=jQuery.Event("initializeAfter");i.MapInputWidget=this,$(t).trigger(i)},this.getId=function(){return $(t).prop("id")},this.setPosition=function(i){if(e.marker&&e.marker.setMap(null),null!==i){$(n).prop("disabled",!1);var a=m(i);1===$(t).data("align-map-center")&&e.panTo(a);var o=null;1===$(t).data("animate-marker")&&(o=google.maps.Animation.DROP),e.marker=new google.maps.Marker({map:e,position:a,draggable:1!==$(t).data("readonly"),animation:o}),1!==$(t).data("readonly")&&google.maps.event.addListener(e.marker,"dragend",function(){r.setPosition(this.getPosition())}),$(t).data("pattern");var u=jQuery.Event("makePoint");u.pointString=l(a),u.MapInputWidget=this,$(t).trigger(u),$(n).prop("value",u.pointString)}},this.panTo=function(t){var n=m(t);e.panTo(n)},this.setZoom=function(t){e.setZoom(t)},this.getMap=function(){return e},this.getSearchBar=function(){return i},this.getInput=function(){return n}}